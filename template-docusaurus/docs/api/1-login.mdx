---
title: ğŸ“¦ @xx/data-login
---

<PkgBrief name="dataLogin.." named pkg="@xx/data-login">
  ç™»å½•ç›¸å…³æ¥å£ï¼Œä½¿ç”¨ `@xx/fetcher-base`ã€‚
</PkgBrief>

## API

### `dataLoginQr`

è·å–ç™»å½•äºŒç»´ç ä¿¡æ¯ã€‚

```ts
function dataLoginQr(): Promise<DataLoginQr>;
```

### `dataLoginSendCaptcha`

å‘é€ç™»å½•éªŒè¯ç ã€‚

:::warning
æ³¨æ„æµ‹è¯•æœåŠ¡å™¨ä¸Šä¸ä¼šçœŸæ­£å‘é€ï¼ˆç»Ÿä¸€ç”¨ `6789` å³å¯ï¼‰ï¼Œä½†éœ€è¦æ“ä½œä¸€æ¬¡ï¼Œå¦åˆ™ä¼šè¯´éªŒè¯ç å·²è¿‡æœŸã€‚
:::

```ts
function dataLoginSendCaptcha(mobile: string): Promise<void>;
```

### `dataLoginByMobile`

æ‰‹æœºå· + éªŒè¯ç ç™»å½•ã€‚

```ts
function dataLoginByMobile(mobile: string, captcha: string): Promise<DataLogin>;
```

### `dataLoginByQr`

å°ç¨‹åºç ç™»å½•æŸ¥è¯¢ï¼Œç”¨æˆ·ä½¿ç”¨å°ç¨‹åºæ‰« PC çš„äºŒç»´ç è¿›è¡Œç™»å½•ï¼ŒPC ç«¯ä½¿ç”¨æ­¤æ¥å£è¿›è¡Œè½®è¯¢ï¼Œè‹¥è¿”å› `DataLogin` å¯¹è±¡ï¼Œåˆ™è¡¨ç¤ºç™»å½•æˆåŠŸã€‚

```ts
function dataLoginByQr(tempUid: string): Promise<DataLogin | null>;
```

### `dataLoginBySsoToken`

ä½¿ç”¨ SSO Token ç™»å½•ï¼Œ`ssoToken` ä¸ºä¸‰æ–¹ç«™ç‚¹æ‹¼æ¥äº† `__ssoToken` çš„æœ¬ç«™åœ°å€ï¼Œè·³è½¬è¿‡æ¥åä¼šåœ¨ `ModelApp` è¿›è¡Œæ‹¦æˆªå¹¶æ‰§è¡Œ SSO ç™»å½•ã€‚

```ts
function dataLoginBySsoToken(ssoToken: string): Promise<DataLogin>;
```

### `dataLoginProfile`

:::warning[ä¸šåŠ¡å±‚ä¸€èˆ¬ä¸è°ƒç”¨æ­¤æ¥å£]
æ­¤æ¥å£å…¶å®æ˜¯ç™»å½•æˆåŠŸåçš„æ¥å£ï¼Œå› ä¸ºæ•°æ®åŒ…å°è£…äº†ç™»å½• + è·å–ç”¨æˆ·ä¿¡æ¯çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥å°è£…äº†å¸¦å‚æ•°çš„æ–¹æ³•ã€‚
:::

```ts
function dataLoginProfile(tenantId: string, token: string): Promise<DataLoginProfile>;
```

## ç±»å‹

### `DataLoginQr`

äºŒç»´ç ä¿¡æ¯ã€‚

```ts
interface DataLoginQr {
  tempUid: string;
  qr: string;
}
```

### `DataLoginAuth`

ç”¨æˆ·ç™»å½•ä¿¡æ¯ã€‚

```ts
interface DataLoginAuth {
  id: string;
  tenantId: string;
  token: string;
  tokenRefresh: string;
  tokenExpired: number;
}
```

### `DataLoginProfile`

ç”¨æˆ·ä¿¡æ¯ã€‚

```ts
interface DataLoginProfile {
  name: string;
  nickname: string;
  avatar: string;
  mobile: string;
  tenantId: string;
  role: string;
  invitationCode: string;
}
```

### `DataLogin`

ç™»å½•è¿‡ç¨‹åŒ…è£¹éªŒè¯å’Œè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œç™»å½•å®Œæˆåä¸šåŠ¡å±‚å°†è·å–åˆ°å®Œæ•´çš„ç”¨æˆ·ä¿¡æ¯ã€‚

```ts
interface DataLogin extends DataLoginAuth, DataLoginProfile {}
```
